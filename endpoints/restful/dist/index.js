!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.restfulIO={})}(this,function(t){"use strict";function e(t,e){return new o(t,e)}function r(t,e){var r=encodeURIComponent;return e?t+"?"+Object.keys(e).map(function(t){return r(t)+"="+r(e[t])}).join("&"):t}var n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o=function(){function t(t,e){this.url=t,this.fetchOptions=e}return t.prototype.create=function(t,e,r){return this.request("POST",this.collectionUrl(r,e),e,t)},t.prototype.update=function(t,e,r,n){return this.request("PUT",this.objectUrl(n,t,r),r,e)},t.prototype.read=function(t,e,r){return this.request("GET",this.objectUrl(r,t,e),e)},t.prototype.destroy=function(t,e,r){return this.request("DELETE",this.objectUrl(r,t,e),e)},t.prototype.list=function(t,e){return this.request("GET",this.collectionUrl(e,t),t)},t.prototype.subscribe=function(t){},t.prototype.unsubscribe=function(t){},t.prototype.isRelativeUrl=function(t){return 0===t.indexOf("./")},t.prototype.removeTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.substr(0,t.length-1):t},t.prototype.getRootUrl=function(t){var e=this.url;if(this.isRelativeUrl(e)){var r=t.getOwner(),n=r.getEndpoint().getUrl(r);return this.removeTrailingSlash(n)+"/"+e.substr(2)}return e},t.prototype.getUrl=function(t){var e=this.getRootUrl(t);return t.isNew()?e:this.removeTrailingSlash(e)+"/"+t.id},t.prototype.objectUrl=function(t,e,n){return r(this.getUrl(t),n.params)},t.prototype.collectionUrl=function(t,e){return r(this.getRootUrl(t),e.params)},t.prototype.buildRequestOptions=function(e,r,o){var i=Object.assign({},t.defaultFetchOptions,this.fetchOptions,r),s=i.headers,u=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r}(i,["headers"]),c=n({method:e,headers:n({"Content-Type":"application/json"},s)},u);return o&&(c.body=JSON.stringify(o)),c},t.prototype.request=function(t,e,r,n){var o=r.options;return fetch(e,this.buildRequestOptions(t,o,n)).then(function(t){if(t.ok)return t.json();throw new Error(t.statusText)})},t.defaultFetchOptions={cache:"no-cache",credentials:"same-origin",mode:"cors",redirect:"error"},t}();t.create=e,t.restfulIO=e,t.RestfulEndpoint=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
