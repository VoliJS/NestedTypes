!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.restfulIO={})}(this,function(t){"use strict";var c=function(){return(c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function e(t,e){return new r(t,e)}var r=function(){function u(t,e){this.url=t,this.fetchOptions=e}return u.prototype.create=function(t,e,r){return this.request("POST",this.collectionUrl(r,e),e,t)},u.prototype.update=function(t,e,r,n){return this.request("PUT",this.objectUrl(n,t,r),r,e)},u.prototype.read=function(t,e,r){return this.request("GET",this.objectUrl(r,t,e),e)},u.prototype.destroy=function(t,e,r){return this.request("DELETE",this.objectUrl(r,t,e),e)},u.prototype.list=function(t,e){return this.request("GET",this.collectionUrl(e,t),t)},u.prototype.subscribe=function(t){},u.prototype.unsubscribe=function(t){},u.prototype.isRelativeUrl=function(t){return 0===t.indexOf("./")},u.prototype.removeTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.substr(0,t.length-1):t},u.prototype.getRootUrl=function(t){var e=this.url;if(this.isRelativeUrl(e)){var r=t.getOwner(),n=r.getEndpoint().getUrl(r);return this.removeTrailingSlash(n)+"/"+e.substr(2)}return e},u.prototype.getUrl=function(t){var e=this.getRootUrl(t);return t.isNew()?e:this.removeTrailingSlash(e)+"/"+t.id},u.prototype.objectUrl=function(t,e,r){return n(this.getUrl(t),r.params)},u.prototype.collectionUrl=function(t,e){return n(this.getRootUrl(t),e.params)},u.prototype.buildRequestOptions=function(t,e,r){var n=Object.assign({},u.defaultFetchOptions,this.fetchOptions,e),o=n.headers,i=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]])}return r}(n,["headers"]),s=c({method:t,headers:c({"Content-Type":"application/json"},o)},i);return r&&(s.body=JSON.stringify(r)),s},u.prototype.request=function(t,e,r,n){var o=r.options;return fetch(e,this.buildRequestOptions(t,o,n)).then(function(t){if(t.ok)return t.json();throw new Error(t.statusText)})},u.defaultFetchOptions={cache:"no-cache",credentials:"same-origin",mode:"cors",redirect:"error"},u}();function n(t,e){var r=encodeURIComponent;return e?t+"?"+Object.keys(e).map(function(t){return r(t)+"="+r(e[t])}).join("&"):t}t.create=e,t.restfulIO=e,t.RestfulEndpoint=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
