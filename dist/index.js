!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("underscore"),require("jquery")):"function"==typeof define&&define.amd?define(["underscore","jquery"],e):"object"==typeof exports?exports.Nested=e(require("underscore"),require("jquery")):t.Nested=e(t._,t.$)}(this,function(t,e){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=21)}([function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0});var i=r(7);e.tools=i,n(r(10)),n(r(25));var o=r(9);e.eventsApi=o;var s=r(10);Object.extend=function(t,e){return s.Mixable.extend(t,e)},Object.assign||(Object.assign=i.assign),Object.log=i.log},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=r(35),s=r(13),a=(i.tools.assign,i.eventsApi.trigger2,i.eventsApi.trigger3),u=i.eventsApi.on,c=i.eventsApi.off;!function(t){t[t.share=1]="share",t[t.listen=2]="listen",t[t.persistent=4]="persistent"}(e.ItemsBehavior||(e.ItemsBehavior={}));var l=function(){function t(t){this._events=void 0,this._changeToken={},this._transaction=!1,this._isDirty=null,this._owner=void 0,this._ownerKey=void 0,this._validationError=void 0,this.cid=this.cidPrefix+t}return t.prototype.dispose=function(){this._disposed||(this._owner=void 0,this._ownerKey=void 0,this.off(),this.stopListening(),this._disposed=!0)},t.prototype.initialize=function(){},t.prototype.onChanges=function(t,e){u(this,this._changeEventName,t,e)},t.prototype.offChanges=function(t,e){c(this,this._changeEventName,t,e)},t.prototype.listenToChanges=function(t,e){this.listenTo(t,t._changeEventName,e)},t.prototype.transaction=function(t,r){void 0===r&&(r={});var n=e.transactionApi.begin(this);t.call(this,this),n&&e.transactionApi.commit(this)},t.prototype.updateEach=function(t,r){var n=e.transactionApi.begin(this);this.each(t),n&&e.transactionApi.commit(this)},t.prototype.set=function(t,e){if(t){var r=this._createTransaction(t,e);r&&r.commit()}return this},t.prototype.assignFrom=function(t){return this.set(t.__inner_state__||t,{merge:!0})},t.prototype.parse=function(t,e){return t},t.prototype.deepGet=function(t){return s.resolveReference(this,t,function(t,e){return t.get?t.get(e):t[e]})},t.prototype.getOwner=function(){return this._owner},t.prototype.getStore=function(){var t=this._owner;return t?t.getStore():this._defaultStore},t.prototype.map=function(t,e){var r=[],n=void 0!==e?function(r,n){return t.call(e,r,n)}:t;return this.each(function(t,e){var i=n(t,e);void 0!==i&&r.push(i)}),r},t.prototype.mapObject=function(t,e){var r={};return this.each(function(e,n){var i=t(e,n);void 0!==i&&(r[n]=i)}),r},Object.defineProperty(t.prototype,"validationError",{get:function(){var t=this._validationError||(this._validationError=new o.ValidationError(this));return t.length?t:null},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){},t.prototype.getValidationError=function(t){var e=this.validationError;return(t?e&&e.nested[t]:e)||null},t.prototype.deepValidationError=function(t){return s.resolveReference(this,t,function(t,e){return t.getValidationError(e)})},t.prototype.eachValidationError=function(t){var e=this.validationError;e&&e.eachError(t,this)},t.prototype.isValid=function(t){return!this.getValidationError(t)},t.prototype.valueOf=function(){return this.cid},t.prototype.toString=function(){return this.cid},t.prototype.getClassName=function(){var t=this.constructor.name;if("Subclass"!==t)return t},t}();l=n([i.mixins(i.Messenger),i.extendable],l),e.Transactional=l,e.transactionApi={begin:function(t){return!t._transaction&&(t._transaction=!0)},markAsDirty:function(t,e){var r=!e.silent;return r&&(t._isDirty=e),t._changeToken={},t._validationError=void 0,r},commit:function(t,e){var r=t._isDirty;if(r){for(;t._isDirty;){var n=t._isDirty;t._isDirty=null,a(t,t._changeEventName,t,n,e)}t._transaction=!1;var i=t._owner;i&&i!==e&&i._onChildrenChange(t,r)}else t._isDirty=null,t._transaction=!1},aquire:function(t,e,r){return e._owner?e._owner===t:(e._owner=t,e._ownerKey=r,!0)},free:function(t,e){t===e._owner&&(e._owner=void 0,e._ownerKey=void 0)}}},function(t,e,r){"use strict";function n(t){var e=t.defaults,r=t.attributes,n=t.idAttribute,i="function"==typeof e?e():r||e||{};return!n||n in i||(i[n]=void 0),i}function i(t){"function"==typeof t?(this.Collection=t,this.Collection.prototype.model=this):this.Collection.define(t||{})}function o(t,e){t.hasOwnProperty("shared")||Object.defineProperty(t,"shared",{get:function(){return new c.ChainableAttributeSpec({value:null,type:t,_attribute:e})}})}Object.defineProperty(e,"__esModule",{value:!0});var s=r(12);e.Record=s.Record;var a=r(0),u=r(30),c=r(17);e.ChainableAttributeSpec=c.ChainableAttributeSpec;var l=r(1),h=r(11);!function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(11));var f=a.tools.assign,p=(a.tools.defaults,a.tools.omit),d=a.tools.getBaseClass;s.Record.define=function(t,e){void 0===t&&(t={});var r=d(this),o=r.prototype,s=a.tools.getChangedStatics(this,"attributes","collection","Collection"),c=f(s,t);"Collection"in this&&void 0===this.Collection&&a.tools.log.error("[Model Definition] "+this.prototype.getClassName()+".Collection is undefined. It must be defined _before_ the model.",c);var l=u.compile(this.attributes=n(c),o._attributes);return!1===c.properties&&(l.properties={}),f(l.properties,t.properties||{}),f(l,p(c,"attributes","collection","defaults","properties","forEachAttr")),a.Mixable.define.call(this,l,e),i.call(this,c.collection||c.Collection),this},s.Record.predefine=function(){return l.Transactional.predefine.call(this),this.Collection=d(this).Collection.extend(),this.Collection.prototype.model=this,o(this,h.SharedType),this},s.Record._attribute=h.AggregatedType,o(s.Record,h.SharedType),Object.defineProperties(Date,{microsoft:{get:function(){return new c.ChainableAttributeSpec({type:Date,_attribute:h.MSDateType})}},timestamp:{get:function(){return new c.ChainableAttributeSpec({type:Date,_attribute:h.TimestampType})}}}),Number.integer=function(t){return t?Math.round(t):0},Number.integer._attribute=h.NumericType,"undefined"!=typeof window&&(window.Integer=Number.integer),e.createSharedTypeSpec=o},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function i(t){return new c.ChainableAttributeSpec({value:t})}function o(t){return function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i;return this.transaction(function(){i=t.apply(e,r)}),i}}Object.defineProperty(e,"__esModule",{value:!0}),n(r(0)),n(r(16)),n(r(32)),n(r(2));var s=r(0);e.on=(l=s.Events,l.on),e.off=l.off,e.trigger=l.trigger,e.once=l.once,e.listenTo=l.listenTo,e.stopListening=l.stopListening,e.listenToOnce=l.listenToOnce;var a=r(2);e.Model=a.Record;var u=r(0);e.Class=u.Mixable;var c=r(2);e.value=i,e.transaction=o;var l},function(t,e,r){"use strict";function n(t,e){return function(r,n,i){t.call(this,r,n,i),e.call(this,r,n,i)}}function i(t,e){return function(r,n){return e.call(this,t.call(this,r,n),n)}}function o(t,e){return function(r,n,i,o){return e.call(this,t.call(this,r,n,i,o),n,i,o)}}function s(t){return function(e,r,n){return r?t.call(this,e,r,n):"Required"}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(12),u=r(0),c=u.tools.notEqual,l=u.tools.assign,h=function(){function t(t,e){this.name=t,this.getHook=null,this.options=e;var r=l({getHooks:[],transforms:[],changeHandlers:[]},e);r.getHooks=r.getHooks.slice(),r.transforms=r.transforms.slice(),r.changeHandlers=r.changeHandlers.slice();var a=r.value,u=r.type,c=r.parse,h=r.toJSON,f=r.changeEvents,p=r.validate,d=r.getHooks,v=r.transforms,y=r.changeHandlers;if(this.value=a,this.type=u,this.propagateChanges=!1!==f,this.parse=c,this.toJSON=void 0===h?this.toJSON:h,this.validate=p||this.validate,r.isRequired&&(this.validate=s(this.validate)),v.unshift(this.convert),this.get&&d.unshift(this.get),this.initialize.call(this,r),d.length){var g=this.getHook=d.reduce(i),_=this.validate;this.validate=function(t,e,r){return _.call(this,t,g.call(t,e,r),r)}}v.length&&(this.transform=v.reduce(o)),y.length&&(this.handleChange=y.reduce(n))}return t.create=function(e,r){var n=e.type;return new(e._attribute||(n?n._attribute:t))(r,e)},t.prototype.canBeUpdated=function(t,e,r){},t.prototype.transform=function(t,e,r,n){return t},t.prototype.convert=function(t,e,r,n){return t},t.prototype.isChanged=function(t,e){return c(t,e)},t.prototype.handleChange=function(t,e,r){},t.prototype.create=function(){return new this.type},t.prototype.clone=function(t,e){if(t&&"object"==typeof t){if(t.clone)return t.clone();var r=Object.getPrototypeOf(t);if(r===Object.prototype||r===Array.prototype)return JSON.parse(JSON.stringify(t))}return t},t.prototype.dispose=function(t,e){},t.prototype.validate=function(t,e,r){},t.prototype.toJSON=function(t,e){return t&&t.toJSON?t.toJSON():t},t.prototype.createPropertyDescriptor=function(){var t=this,e=t.name,r=t.getHook;if("id"!==e)return{set:function(t){a.setAttribute(this,e,t)},get:r?function(){return r.call(this,this.attributes[e],e)}:function(){return this.attributes[e]}}},t.prototype.initialize=function(t,e){},t.prototype._log=function(t,e,r,n){u.tools.log[t]("[Attribute Update] "+n.getClassName()+"."+this.name+": "+e,r,"Attributes spec:",n._attributes)},t}();e.AnyType=h,a.Record.prototype._attributes={id:h.create({value:void 0},"id")},a.Record.prototype.defaults=function(t){return void 0===t&&(t={}),{id:t.id}}},function(e,r){e.exports=t},function(t,e,r){"use strict";function n(t){var e=t.models;return t.models=[],t._byId={},s(t,e),e}function i(t,e,r){var n,i=t.model;if(t._shared)n=e instanceof i?e:i.create(e,r),t._shared&f.ItemsBehavior.listen&&y(n,n._changeEventName,t._onChildrenChange,t);else if(n=e instanceof i?r.merge?e.clone():e:i.create(e,r),!m(t,n)){var o=t._aggregationError||(t._aggregationError=[]);o.push(n)}var s=t._itemEvents;return s&&s.subscribe(t,n),n}function o(t,e){t._shared?t._shared&f.ItemsBehavior.listen&&g(e,e._changeEventName,t._onChildrenChange,t):b(t,e);var r=t._itemEvents;r&&r.unsubscribe(t,e)}function s(t,e){for(var r=0,n=e;r<n.length;r++){o(t,n[r])}return e}function a(t,e){var r=t._comparator;return!(!r||!1===e.sort)&&(t.models.sort(r),!0)}function u(t,e){t[e.cid]=e;var r=e.id;null!=r&&(t[r]=e)}function c(t,e){delete t[e.cid];var r=e.id;null!=r&&delete t[r]}function l(t,e){delete t[e.previous(e.idAttribute)];var r=e.id;null==r||(t[r]=e)}function h(t){t._log("error","added records already have an owner",t._aggregationError),t._aggregationError=void 0}Object.defineProperty(e,"__esModule",{value:!0});var f=r(1),p=r(0),d=(p.eventsApi.EventMap,p.eventsApi.trigger2),v=p.eventsApi.trigger3,y=p.eventsApi.on,g=p.eventsApi.off,_=f.transactionApi.commit,m=(f.transactionApi.markAsDirty,f.transactionApi.aquire),b=f.transactionApi.free;e.dispose=n,e.convertAndAquire=i,e.free=o,e.freeAll=s,e.sortElements=a,e.addIndex=u,e.removeIndex=c,e.updateIndex=l;var O=function(){function t(t,e,r,n,i,o){this.object=t,this.isRoot=e,this.added=r,this.removed=n,this.nested=i,this.sorted=o}return t.prototype.commit=function(t){for(var e=this,r=e.nested,n=e.object,i=n._isDirty,o=0,s=r;o<s.length;o++){var a=s[o];a.commit(n)}n._aggregationError&&h(n);for(var u=0,c=r;u<c.length;u++){var a=c[u];d(n,"change",a.object,i)}for(var l=this,f=l.added,p=l.removed,y=0,g=f;y<g.length;y++){var m=g[y];v(m,"add",m,n,i),v(n,"add",m,n,i)}for(var b=0,O=p;b<O.length;b++){var m=O[b];v(m,"remove",m,n,i),v(n,"remove",m,n,i)}this.sorted&&d(n,"sort",n,i),(f.length||p.length)&&d(n,"update",n,i),this.isRoot&&_(n,t)},t}();e.CollectionTransaction=O,e.logAggregationError=h},function(t,e,r){"use strict";function n(t){if(null===t)return!0;switch(typeof t){case"number":case"string":case"boolean":return!0;case"object":var e=Object.getPrototypeOf(t);if(e===Object.prototype||e===Array.prototype)return l(t,n)}return!1}function i(t){return Object.getPrototypeOf(t.prototype).constructor}function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=i(t),o={},s=0,a=e;s<a.length;s++){var u=a[s],c=t[u];void 0!==c&&c!==n[u]&&(o[u]=c)}return o}function s(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function a(t,e){for(var r,n=0;n<t.length;n++)if(r=e(t[n],n))return r}function u(t,e){var r;for(var n in t)if(t.hasOwnProperty(n)&&(r=e(t[n],n)))return r}function c(t,e){return Object.getPrototypeOf(t)===A?a(t,e):u(t,e)}function l(t,e){return!c(t,function(t){return!e(t)})}function h(t,e){for(var r,n=t;!r&&n;n=Object.getPrototypeOf(n))r=Object.getOwnPropertyDescriptor(n,e);return r}function f(t){for(var e={},r={},n=1;n<arguments.length;n++)r[arguments[n]]=!0;for(var i in t)!r.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function p(t,e,r){for(var n in e)if(e.hasOwnProperty(n)){var i=r(e[n],n);void 0===i||(t[n]=i)}return t}function d(t,e){for(var r in e)t[r]=e[r];return t}function v(t,e){for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}function y(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);if(arguments.length>2)for(var n=2;n<arguments.length;n++){var i=arguments[n];i&&y(t,i)}return t}function g(t,e){for(var r in e)e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=e[r]);if(arguments.length>2)for(var n=2;n<arguments.length;n++){var i=arguments[n];i&&g(t,i)}return t}function _(t){return t?Object.keys(t):[]}function m(t){var e,r=!0;return function(){return r&&(r=!1,e=t.apply(this,arguments),t=null),e}}function b(t,e){if(t===e)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){var r=Object.getPrototypeOf(t);if(r!==Object.getPrototypeOf(e))return!0;switch(r){case x:return+t!=+e;case A:return w(t,e);case P:case null:return O(t,e)}}return!0}function O(t,e){var r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(var n=0;n<r.length;n++){var i=r[n];if(!e.hasOwnProperty(i)||b(t[i],e[i]))return!0}return!1}function w(t,e){if(t.length!==e.length)return!0;for(var r=0;r<t.length;r++)if(b(t[r],e[r]))return!0;return!1}Object.defineProperty(e,"__esModule",{value:!0});var j=function(){function t(){this.stops={},this.throws={},this.logger="undefined"!=typeof console?console:null,this.reset()}return t.prototype.doLogging=function(t,e){var r=this.logger,n=r&&r[t];if(n&&n.apply(r,e),this.stops[t],this.throws[t])throw new Error("["+t+"] "+e[0]);this.counts[t]++},t.prototype.reset=function(){return this.level=2,this.counts={error:0,warn:0,info:0,debug:0},this.stops={},this},t.prototype.developer=function(t){return this.level=3,this.stops={error:!0,warn:Boolean(t)},this},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level>0&&this.doLogging("error",t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level>1&&this.doLogging("warn",t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level>2&&this.doLogging("info",t)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level>3&&this.doLogging("debug",t)},Object.defineProperty(t.prototype,"state",{get:function(){return"\nObject.log - Object+ Logging and Debugging Utility\n--------------------------------------------------\nObject.log.counts: Number of logged events by type\n    { errors : "+this.counts.error+", warns : "+this.counts.warn+", info : "+this.counts.info+", debug : "+this.counts.debug+" }\n\nObject.log.level == "+this.level+" : Ignore events which are above specified level \n    - 0 - logging is off;\n    - 1 - Object.log.error(...) only;\n    - 2 - .error() and .warn();\n    - 3 - .error(), .warn(), and .info();\n    - 4 - all of above plus .debug().\n\nObject.log.stops: Stops in debugger for some certain event types\n     { error : "+(this.stops.error||!1)+", warn  : "+(this.stops.warn||!1)+", info  : "+(this.stops.info||!1)+", debug : "+(this.stops.debug||!1)+" } \n\nObject.log.throws: Throws expection on some certain event types\n     { error : "+(this.throws.error||!1)+", warn  : "+(this.throws.warn||!1)+", info  : "+(this.throws.info||!1)+", debug : "+(this.throws.debug||!1)+" }\n"},enumerable:!0,configurable:!0}),t}();e.Log=j,e.log=new j,e.isValidJSON=n,e.getBaseClass=i,e.getChangedStatics=o,e.isEmpty=s,e.some=c,e.every=l,e.getPropertyDescriptor=h,e.omit=f,e.transform=p,e.fastAssign=d,e.fastDefaults=v,e.assign=y,e.defaults=g,Object.setPrototypeOf||(Object.setPrototypeOf=g),e.keys=_,e.once=m;var A=Array.prototype,x=Date.prototype,P=Object.prototype;e.notEqual=b},function(t,e,r){"use strict";function n(){return window.Backbone=c,this}function i(t){this.cid=a.uniqueId("view"),t||(t={}),a.extend(this,a.pick(t,l)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()}function o(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)}function s(){this.handlers=[],this.checkUrl=a.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(5),u=r(36),c=window.Backbone;Array.prototype.slice;e.VERSION="1.2.3",e.$=u,e.noConflict=n,e.emulateHTTP=!1,e.emulateJSON=!1,e.View=i;var l=["model","collection","el","id","attributes","className","tagName","events"];a.extend(i.prototype,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,r){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==r&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(a.isFunction(r)||(r=this[t[e]]),r){var n=e.match(/^(\S+)\s*(.*)$/),i=n[1],o=n[2];r=a.bind(r,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,r):this.$el.on(i,o,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t.class=a.result(this,"className"));var r=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.Router=o;a.extend(o.prototype,{initialize:function(){},route:function(t,r,n){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(r)&&(n=r,r=""),n||(n=this[r]);var i=this;return e.history.route(t,function(o){var s=i._extractParameters(t,o);!1!==i.execute(n,s,r)&&(i.trigger.apply(i,["route:"+r].concat(s)),i.trigger("route",r,s),e.history.trigger("route",i,r,s))}),this},execute:function(t,e,r){t&&t.apply(this,e)},navigate:function(t,r){return e.history.navigate(t,r),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(t,e){return e?t:"([^/?]+)"}).replace(/\*\w+/g,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return a.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}}),e.History=s;s.started=!1,a.extend(s.prototype,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(/^[#\/]|\s+$/g,"")},start:function(t){if(s.started)throw new Error("Backbone.history has already been started");if(s.started=!0,this.options=a.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(/^\/+|\/+$/g,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,n=r.insertBefore(this.iframe,r.firstChild).contentWindow;n.document.open(),n.document.close(),n.location.hash="#"+this.fragment}var i=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?i("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?i("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),s.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),a.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!s.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var r=this.root;""!==t&&"?"!==t.charAt(0)||(r=r.slice(0,-1)||"/");var n=r+t;if(t=this.decodeFragment(t.replace(/#.*$/,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;e.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,r){if(r){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new s},function(t,e,r){"use strict";function n(t){return b[t]||(b[t]=function(e,r,n,i,o){void 0===i&&void 0===o||y(this,t,e,r,n,i,o),void 0!==n?v(this,t,e,r,n):d(this,t,e,r)})}function i(t,e,r,n){for(var i,o,s=t[e],a=s;a;a=a.next)r&&r!==a.callback&&r!==a.callback._callback||n&&n!==a.context?(o=a,i||(i=a)):o&&(o.next=a.next);s!==i&&(t[e]=i)}function o(t,e,r){for(var n=t;n;n=n.next)n.callback.call(n.context,e,r)}function s(t,e,r,n){for(var i=t;i;i=i.next)i.callback.call(i.context,e,r,n)}function a(t,e,r,n,i){for(var o=t;o;o=o.next)o.callback.call(o.context,e,r,n,i)}function u(t,e,r,n,i,o){for(var s=t;s;s=s.next)s.callback.call(s.context,e,r,n,i,o)}function c(t,e,r,n,i,o,s){for(var a=t;a;a=a.next)a.callback.call(a.context,e,r,n,i,o,s)}function l(t,e,r,n){if(r){var i=t._events||(t._events=Object.create(null));i[e]=new O(r,n,i[e])}}function h(t,e,r,n){if(r){var i=g.once(function(){f(t,e,i),r.apply(this,arguments)});i._callback=r,l(t,e,i,n)}}function f(t,e,r,n){var o=t._events;if(o)if(r||n)if(e)i(o,e,r,n);else for(var s in o)i(o,s,r,n);else e?o[e]=void 0:t._events=void 0}function p(t,e,r,n,i){if(w.test(r))for(var o=r.split(w),s=0,a=o;s<a.length;s++){var u=a[s];t(e,u,n,i)}else t(e,r,n,i)}function d(t,e,r,n){var i=t._events;if(i){var a=i[e],u=i.all;o(a,r,n),s(u,e,r,n)}}function v(t,e,r,n,i){var o=t._events;if(o){var u=o[e],c=o.all;s(u,r,n,i),a(c,e,r,n,i)}}function y(t,e,r,n,i,o,s){var a=t._events;if(a){var l=a[e],h=a.all;u(l,r,n,i,o,s),c(h,e,r,n,i,o,s)}}Object.defineProperty(e,"__esModule",{value:!0});var g=r(7),_=function(){function t(e){this.handlers=[],e&&(e instanceof t?this.handlers=e.handlers.slice():e&&this.addEventsMap(e))}return t.prototype.merge=function(t){this.handlers=this.handlers.concat(t.handlers)},t.prototype.addEventsMap=function(t){for(var e in t)this.addEvent(e,t[e])},t.prototype.bubbleEvents=function(t){for(var e=0,r=t.split(w);e<r.length;e++){var i=r[e];this.addEvent(i,n(i))}},t.prototype.addEvent=function(t,e){for(var r=this.handlers,n=0,i=t.split(w);n<i.length;n++){var o=i[n];r.push(new m(o,e))}},t.prototype.subscribe=function(t,e){for(var r=0,n=this.handlers;r<n.length;r++){var i=n[r];l(e,i.name,i.callback,t)}},t.prototype.unsubscribe=function(t,e){for(var r=0,n=this.handlers;r<n.length;r++){var i=n[r];f(e,i.name,i.callback,t)}},t}();e.EventMap=_;var m=function(){function t(t,e){this.name=t,this.callback=!0===e?n(t):"string"==typeof e?function(){var t=this[e];t&&t.apply(this,arguments)}:e}return t}();e.EventDescriptor=m;var b={},O=function(){function t(t,e,r){void 0===r&&(r=null),this.callback=t,this.context=e,this.next=r}return t}();e.EventHandler=O,e.on=l,e.once=h,e.off=f;var w=/\s+/;e.strings=p,e.trigger2=d,e.trigger3=v,e.trigger5=y},function(t,e,r){"use strict";function n(t){if(t)return"function"==typeof t?{get:t}:t}function i(t){return c("mixinRules",t)}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c("mixins",t)}function s(t){d.mixTo(t)}function a(t){t.predefine()}function u(t){if("function"!=typeof t)return c("define",t);t.define({})}function c(t,e){return function(r){r[t]?r[t](e):d[t].call(r,e)}}function l(t,e,r){return h(p.assign({},t),e,r)}function h(t,e,r){void 0===r&&(r={});for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if("constructor"!==o){var s=Object.getOwnPropertyDescriptor(e,o),a=p.getPropertyDescriptor(t,o),u=a&&a.value;if(null!=u){var c=r[o];c&&(t[o]="object"==typeof c?l(u,s.value,c):"merge"===c?l(u,s.value):v[c](u,s.value))}else Object.defineProperty(t,o,s)}}return t}var f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var p=r(7),d=function(){function t(){this.initialize.apply(this,arguments)}return t.prototype.initialize=function(){},t.create=function(t,e){return new this(t,e)},t.mixins=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=this.prototype,i=this._mixinRules||{},o=this._appliedMixins=(this._appliedMixins||[]).slice(),s=0,a=e;s<a.length;s++){var u=a[s];if(u instanceof Array)return t.mixins.apply(this,u);o.indexOf(u)>=0||(o.push(u),"function"==typeof u?(p.defaults(this,u),h(n,u.prototype,i)):h(n,u,i))}return this},t.mixTo=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++){var o=i[n];t.mixins.call(o,this)}return this},t.mixinRules=function(t){var e=Object.getPrototypeOf(this.prototype).constructor;return e._mixinRules&&h(t,e._mixinRules),this._mixinRules=t,this},t.define=function(t,e){if(void 0===t&&(t={}),!this.define)return p.log.error("[Class Defininition] Class must have class extensions to use @define decorator. Use '@extendable' before @define, or extend the base class with class extensions.",t),this;this.predefine();var r=this.prototype,i=p.omit(t,"properties","mixins","mixinRules"),o=t.properties,s=void 0===o?{}:o,a=t.mixins,u=t.mixinRules;return p.assign(r,i),p.assign(this,e),s&&Object.defineProperties(r,p.transform({},s,n)),u&&this.mixinRules(u),a&&this.mixins(a),this},t.extend=function(t,e){var r;return t&&t.hasOwnProperty("constructor")?(r=t.constructor,f(r,this)):r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e}(this),t?r.define(t,e):r.predefine()},t.predefine=function(){var e=p.getBaseClass(this);return e.create===this.create&&(this.create=t.create),this.__super__=e.prototype,this},t}();d._mixinRules={properties:"merge"},e.Mixable=d,e.mixinRules=i,e.mixins=o,e.extendable=s,e.predefine=a,e.define=u;var v={pipe:function(t,e){return function(r){return t.call(this,e.call(this,r))}},mergeSequence:function(t,e){return function(){return p.defaults(t.call(this),e.call(this))}},overwrite:function(t,e){return e},sequence:function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}},reverse:function(t,e){return function(){e.apply(this,arguments),t.apply(this,arguments)}},every:function(t,e){return function(){return t.apply(this,arguments)&&e.apply(this,arguments)}},some:function(t,e){return function(){return t.apply(this,arguments)||e.apply(this,arguments)}}};e.mergeProps=h},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(4)),n(r(28)),n(r(27)),n(r(26)),n(r(29))},function(t,e,r){"use strict";function n(t){return!!v(t)&&(t._previousAttributes=new t.Attributes(t.attributes),t._changedAttributes=null,!0)}function i(t,e){return t._changedAttributes&&(t._changedAttributes=null),y(t,e)}function o(t,e){var r=new t.Attributes(e);return t.forEachAttr(r,function(e,n,i){r[n]=i.clone(e,t)}),r}function s(t,e,r){var o,s=n(t),a={},u=t.attributes,c=t._attributes[e],l=u[e];if(o=c.canBeUpdated(l,r,a)){var f=l._createTransaction(o,a);f&&(f.commit(t),c.propagateChanges&&(i(t,a),h(t,"change:"+e,t,l,a)))}else{var p=c.transform(r,a,l,t);u[e]=p,c.isChanged(p,l)&&(c.handleChange(p,l,t),i(t,a),h(t,"change:"+e,t,p,a))}s&&d(t)}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var c=r(0),l=r(1),h=c.eventsApi.trigger3,f=c.tools.assign,p=c.tools.isEmpty,d=(c.tools.log,l.transactionApi.free,l.transactionApi.aquire,l.transactionApi.commit),v=l.transactionApi.begin,y=l.transactionApi.markAsDirty,g=0,_=m=function(t){function e(e,r){var n=t.call(this,g++)||this;n.attributes={};var i=r||{},s=(i.parse?n.parse(e,i):e)||{},a=i.clone?o(n,s):n.defaults(s);return n.forEachAttr(a,function(t,e,r){var o=a[e]=r.transform(t,i,void 0,n);r.handleChange(o,void 0,n)}),n.attributes=n._previousAttributes=a,n.initialize(e,r),n._localEvents&&n._localEvents.subscribe(n,n),n}return a(e,t),e.define=function(t,e){return l.Transactional.define(t,e)},e.defaults=function(t){return this.extend({attributes:t})},e.prototype.previousAttributes=function(){return new this.Attributes(this._previousAttributes)},Object.defineProperty(e.prototype,"__inner_state__",{get:function(){return this.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changed",{get:function(){var t=this._changedAttributes;if(!t){var e=this._previousAttributes;t={};for(var r=this,n=r._attributes,i=r.attributes,o=0,s=this._keys;o<s.length;o++){var a=s[o],u=i[a];n[a].isChanged(u,e[a])&&(t[a]=u)}this._changedAttributes=t}return t},enumerable:!0,configurable:!0}),e.prototype.changedAttributes=function(t){if(!t)return!!this.hasChanged()&&f({},this.changed);var e,r=!1,n=this._transaction?this._previousAttributes:this.attributes,i=this._attributes;for(var o in t)i[o].isChanged(n[o],e=t[o])&&((r||(r={}))[o]=e);return r},e.prototype.hasChanged=function(t){var e=this._previousAttributes;return!!e&&(t?this._attributes[t].isChanged(this.attributes[t],e[t]):!p(this.changed))},e.prototype.previous=function(t){if(t){var e=this._previousAttributes;if(e)return e[t]}return null},e.prototype.isNew=function(){return null==this.id},e.prototype.has=function(t){return void 0!=this[t]},e.prototype.unset=function(t,e){return this.set(t,void 0,e),this},e.prototype.clear=function(t){var e=this,r=t&&t.nullify;return this.transaction(function(){e.forEachAttr(e.attributes,function(t,n){return e[n]=r?null:void 0})},t),this},e.prototype.getOwner=function(){var t=this._owner;return this._ownerKey?t:t&&t._owner},Object.defineProperty(e.prototype,"id",{get:function(){return this.attributes[this.idAttribute]},set:function(t){s(this,this.idAttribute,t)},enumerable:!0,configurable:!0}),e.prototype.Attributes=function(t){this.id=t.id},e.prototype.forEachAttr=function(t,e){var r,n=this._attributes;for(var i in t){var o=n[i];o?e(t[i],i,o):(r||(r=[]),r.push("'"+i+"'"))}r&&this._log("warn","attributes "+r.join(", ")+" are not defined",t)},e.prototype.each=function(t,e){for(var r=void 0!==e?function(r,n){return t.call(e,r,n)}:t,n=this.attributes,i=0,o=this._keys;i<o.length;i++){var s=o[i],a=n[s];void 0!==a&&r(a,s)}},e.prototype.keys=function(){for(var t=[],e=this.attributes,r=0,n=this._keys;r<n.length;r++){var i=n[r];void 0===e[i]||t.push(i)}return t},e.prototype.values=function(){return this.map(function(t){return t})},e.prototype._toJSON=function(){return{}},e.prototype._parse=function(t){return t},e.prototype.defaults=function(t){return{}},e.prototype.initialize=function(t,e){},e.prototype.clone=function(t){void 0===t&&(t={});var e=new this.constructor(this.attributes,{clone:!0});return t.pinStore&&(e._defaultStore=this.getStore()),e},e.prototype.deepClone=function(){return this.clone()},e.prototype._validateNested=function(t){var e=this,r=0;return this.forEachAttr(this.attributes,function(n,i,o){var s=o.validate(e,n,i);s&&(t[i]=s,r++)}),r},e.prototype.get=function(t){return this[t]},e.prototype.toJSON=function(){var t=this,e={};return this.forEachAttr(this.attributes,function(r,n,i){var o=i.toJSON;if(void 0!==r){var s=o.call(t,r,n);void 0!==s&&(e[n]=s)}}),e},e.prototype.parse=function(t,e){return this._parse(t)},e.prototype.set=function(e,r,n){return"string"==typeof e?n?t.prototype.set.call(this,(i={},i[e]=r,i),n):(s(this,e,r),this):t.prototype.set.call(this,e,r);var i},e.prototype.deepSet=function(t,e,r){var n=this;return this.transaction(function(){for(var i=t.split("."),o=i.length-1,s=i[o],a=n,u=0;u<o;u++){var c=i[u],l=a.get?a.get(c):a[c];if(!l){var h=a._attributes;if(!h)return;var f=h[c].create();r&&r.nullify&&f._attributes&&f.clear(r),a[c]=l=f}a=l}a.set?a.set(s,e,r):a[s]=e}),this},e.prototype.transaction=function(t,e){void 0===e&&(e={});var r=n(this);t.call(this,this),r&&d(this)},e.prototype._createTransaction=function(t,e){var r=this;void 0===e&&(e={});var o=n(this),s=[],a=[],u=this.attributes,c=e.parse?this.parse(t,e):t;if(c&&c.constructor===Object?this.forEachAttr(c,function(t,n,i){var o,c=u[n];if(o=i.canBeUpdated(c,t,e)){var l=c._createTransaction(o,e);return void(l&&(a.push(l),i.propagateChanges&&s.push(n)))}var h=i.transform(t,e,c,r);u[n]=h,i.isChanged(h,c)&&(s.push(n),i.handleChange(h,c,r))}):this._log("error","incompatible argument type",c),s.length&&i(this,e))return new b(this,o,a,s);for(var l=0,h=a;l<h.length;l++){h[l].commit(this)}o&&d(this)},e.prototype._onChildrenChange=function(t,e){var r=t._ownerKey,n=this._attributes[r];n&&!n.propagateChanges||this.forceAttributeChange(r,e)},e.prototype.forceAttributeChange=function(t,e){void 0===e&&(e={});var r=n(this);i(this,e)&&h(this,"change:"+t,this,this.attributes[t],e),r&&d(this)},Object.defineProperty(e.prototype,"collection",{get:function(){return this._ownerKey?null:this._owner},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;this._disposed||(this.forEachAttr(this.attributes,function(t,r,n){n.dispose(e,t)}),t.prototype.dispose.call(this))},e.prototype._log=function(t,e,r){c.tools.log[t]("[Model Update] "+this.getClassName()+": "+e,r,"Attributes spec:",this._attributes)},e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)||"Model"},e}(l.Transactional);_=m=u([c.define({cidPrefix:"m",_changeEventName:"change",idAttribute:"id",_keys:["id"]})],_),e.Record=_,e.setAttribute=s;var m,b=function(){function t(t,e,r,n){this.object=t,this.isRoot=e,this.nested=r,this.changes=n}return t.prototype.commit=function(t){for(var e=this,r=e.nested,n=e.object,i=e.changes,o=0,s=r;o<s.length;o++){s[o].commit(n)}for(var a=n.attributes,u=n._isDirty,c=0,l=i;c<l.length;c++){var f=l[c];h(n,"change:"+f,n,a[f],u)}this.isRoot&&d(n,t)},t}()},function(t,e,r){"use strict";function n(t,e,r){for(var n=e.match(i),o=n.length-1,s=t,a=0;a<o;a++){var u=n[a];switch(u){case"~":s=s.getStore();break;case"^":s=s.getOwner();break;default:s=s.get(u)}if(!s)return}return r(s,n[o])}Object.defineProperty(e,"__esModule",{value:!0});var i=/\^|([^.]+)/g,o=function(){function t(t,e){void 0===e&&(e=!1);var r=t.match(i).map(function(t){return"^"===t?"getOwner()":"~"===t[0]?'getStore().get("'+t.substr(1)+'")':t});this.tail=e&&r.pop(),this.local=!r.length,r.unshift("self"),this.resolve=new Function("self","return "+r.join(".")+";")}return t}();e.CompiledReference=o,e.resolveReference=n},function(t,e,r){"use strict";function n(t,e,r){e._xhr&&e._xhr.abort&&e._xhr.abort();var n=e._xhr=e.sync(t,e,r);return n&&n.always&&n.always(function(){e._xhr=void 0}),n}function i(t,e){var r=e.error;e.error=function(n){r&&r.call(e.context,t,n,e),o(t,"error",t,n,e)}}function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t.trigger.apply(t,e);var n=t.collection;n&&n.trigger.apply(n,e)}var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var u=r(15),c=r(5),l=r(3),h=l.tools.defaults,f=l.tools.getBaseClass(l.Model).prototype,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.dispose=function(){this._xhr&&this._xhr.abort&&this._xhr.abort(),t.prototype.dispose.call(this)},e.prototype.url=function(){return this.model.prototype.urlRoot||""},e.prototype._invalidate=function(t){var e;if(t.validate&&(e=this.validationError))return this.trigger("invalid",this,e,c.extend({validationError:e},t)),!0},e.prototype.fetch=function(t){t=c.extend({parse:!0},t);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";if(r[i](n,t),r._invalidate(t))return!1;e&&e.call(t.context,r,n,t),r.trigger("sync",r,n,t)},i(this,t),n("read",this,t)},e.prototype.create=function(t,e){var r=this;void 0===e&&(e={});var n=t instanceof d?t:this.model.create(t,e,this);n._owner||(n._owner=this),e.wait||this.add([n],e);var i=e.success;return e.success=function(t,n,o){e.wait&&r.add([t],h({parse:!1},o)),i&&i.call(o.context,t,n,o)},n.save(null,e),n},e.prototype.sync=function(){return u.sync.apply(this,arguments)},e}(l.Collection);p=a([l.define({itemEvents:{destroy:function(t){this.remove(t)}}})],p),e.RestCollection=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._invalidate=function(t){var e;if(t.validate&&(e=this.validationError))return o(this,"invalid",this,e,c.extend({validationError:e},t)),!0},e.prototype.dispose=function(){this._xhr&&this._xhr.abort&&this._xhr.abort(),t.prototype.dispose.call(this)},e.prototype.fetch=function(t){t=c.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){if(e.set(n,t),e._invalidate(t))return!1;r&&r.call(t.context,e,n,t),o(e,"sync",e,n,t)},i(this,t),n("read",this,t)},e.prototype.sync=function(){return u.sync.apply(this,arguments)},e.prototype.save=function(t,e,r){var s,a,l=this;null==t||"object"==typeof t?(s=t,a=e||{}):((s={})[t]=e,a=r||{});var h=c.extend({validate:!0,parse:!0},a),p=h.wait;if(s&&!p&&this.set(s,a),this._invalidate(h))return s&&p&&this.set(s,a),u.errorPromise(this.validationError);var d=this,v=h.success,y=this.attributes;h.success=function(t){if(d.attributes=y,p&&(t=c.extend({},s,t)),t&&(f.set.call(l,t,h),d._invalidate(h)))return!1;v&&v.call(h.context,d,t,h),o(d,"sync",d,t,h)},i(this,h),s&&p&&(this.attributes=c.extend({},y,s));var g=this.isNew()?"create":h.patch?"patch":"update";"patch"!==g||h.attrs||(h.attrs=s);var _=n(g,this,h);return this.attributes=y,_},e.prototype.destroy=function(t){t=t?c.clone(t):{};var e=this,r=t.success,s=t.wait,a=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){s&&a(),r&&r.call(t.context,e,n,t),e.isNew()||o(e,"sync",e,n,t)};var u;return this.isNew()?c.defer(t.success):(i(this,t),u=n("delete",this,t)),s||a(),u||!1},e.prototype.url=function(){var t=c.result(this,"urlRoot")||c.result(this.collection,"url")||u.urlError();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},e}(l.Model);d=a([l.define({collection:p,urlRoot:""})],d),e.RestModel=d},function(t,e,r){"use strict";function n(){throw new Error('A "url" property or function must be specified')}Object.defineProperty(e,"__esModule",{value:!0});var i=r(5),o=r(8),s=r(3),a=s.tools.defaults,u={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.$=o.$,e.errorPromise=function(t){var r=e.$.Deferred();return r.reject(t),r},e.ajax=function(){return e.$.ajax.apply(e.$,arguments)},e.sync=function(t,r,s){void 0===s&&(s={});var c=u[t];a(s,{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var l={type:c,dataType:"json"};if(s.url||(l.url=i.result(r,"url")||n()),null!=s.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(l.contentType="application/json",l.data=JSON.stringify(s.attrs||r.toJSON(s))),s.emulateJSON&&(l.contentType="application/x-www-form-urlencoded",l.data=l.data?{model:l.data}:{}),s.emulateHTTP&&("PUT"===c||"DELETE"===c||"PATCH"===c)){l.type="POST",s.emulateJSON&&(l.data._method=c);var h=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",c),h)return h.apply(this,arguments)}}"GET"===l.type||s.emulateJSON||(l.processData=!1);var f=s.error;s.error=function(t,e,r){s.textStatus=e,s.errorThrown=r,f&&f.call(s.context,t,e,r)};var p=s.xhr=e.ajax(i.extend(l,s));return r.trigger("request",r,p,s),r.collection&&r.collection.trigger("request",r,p,s),p},e.urlError=n},function(t,e,r){"use strict";function n(t,e,r){var n=r.parse?t.parse(e,r):e;return Array.isArray(n)?n:[n]}function i(t,e){return void 0!==e?function(r,n){return t.call(e,r,n)}:t}function o(t,e){return"object"==typeof t?function(e){for(var r in t)if(t[r]!==e[r])return!1;return!0}:i(t,e)}var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var u=r(0),c=r(1),l=r(2),h=r(6),f=r(22),p=r(24),d=r(23),v=u.eventsApi.trigger2,y=(u.eventsApi.on,u.eventsApi.off,c.transactionApi.begin),g=c.transactionApi.commit,_=c.transactionApi.markAsDirty,m=u.tools.omit,b=(u.tools.log,u.tools.assign),O=u.tools.defaults,w=0,j=Array.prototype.slice,A=P=function(t){function e(e,r,i){void 0===r&&(r={});var o=t.call(this,w++)||this;if(o.models=[],o._byId={},o.comparator=o.comparator,void 0!==r.comparator&&(o.comparator=r.comparator,r.comparator=void 0),o.model=o.model,r.model&&(o.model=r.model,r.model=void 0),o.idAttribute=o.model.prototype.idAttribute,o._shared=i||0,e){var s=n(o,e,r);p.emptySetTransaction(o,s,r,!0)}return o.initialize.apply(o,arguments),o._localEvents&&o._localEvents.subscribe(o,o),o}return s(e,t),e.prototype.createSubset=function(t,e){var r=this.constructor.subsetOf(this).options.type,n=new r(t,e);return n.resolve(this),n},e.predefine=function(){function t(t,r,n){e.call(this,t,r,c.ItemsBehavior.share|(n?c.ItemsBehavior.listen:0))}var e=this;return this._SubsetOf=null,u.Mixable.mixTo(t),t.prototype=this.prototype,t._attribute=x,this.Refs=this.Subset=t,c.Transactional.predefine.call(this),l.createSharedTypeSpec(this,l.SharedType),this},e.define=function(t,e){void 0===t&&(t={});var r=u.tools.getChangedStatics(this,"comparator","model","itemEvents"),n=b(r,t),i=m(n,"itemEvents");if(n.itemEvents){var o=new u.EventMap(this.prototype._itemEvents);o.addEventsMap(n.itemEvents),i._itemEvents=o}return c.Transactional.define.call(this,i,e)},Object.defineProperty(e.prototype,"__inner_state__",{get:function(){return this.models},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"comparator",{get:function(){return this._comparator},set:function(t){var e=this;switch(typeof t){case"string":this._comparator=function(e,r){var n=e[t],i=r[t];return n===i?0:n<i?-1:1};break;case"function":1===t.length?this._comparator=function(r,n){var i=t.call(e,r),o=t.call(e,n);return i===o?0:i<o?-1:1}:this._comparator=function(r,n){return t.call(e,r,n)};break;default:this._comparator=null}},enumerable:!0,configurable:!0}),e.prototype.getStore=function(){return this._store||(this._store=this._owner?this._owner.getStore():this._defaultStore)},e.prototype._onChildrenChange=function(t,e,r){if(void 0===e&&(e={}),r!==this){var n=this.idAttribute;t.hasChanged(n)&&h.updateIndex(this._byId,t);var i=y(this);_(this,e)&&v(this,"change",t,e),i&&g(this)}},e.prototype.get=function(t){if(null!=t){if("object"==typeof t){var e=t[this.idAttribute];return void 0!==e&&this._byId[e]||this._byId[t.cid]}return this._byId[t]}},e.prototype.each=function(t,e){for(var r=i(t,e),n=this.models,o=0;o<n.length;o++)r(n[o],o)},e.prototype.every=function(t,e){for(var r=o(t,e),n=this.models,i=0;i<n.length;i++)if(!r(n[i],i))return!1;return!0},e.prototype.filter=function(t,e){var r=o(t,e);this.models;return this.map(function(t,e){return r(t,e)?t:void 0})},e.prototype.some=function(t,e){for(var r=o(t,e),n=this.models,i=0;i<n.length;i++)if(r(n[i],i))return!0;return!1},e.prototype.map=function(t,e){for(var r=i(t,e),n=this.models,o=Array(n.length),s=0,a=0;a<n.length;a++){var u=r(n[a],a);void 0===u||(o[s++]=u)}return o.length=s,o},e.prototype._validateNested=function(t){if(this._shared)return 0;var e=0;return this.each(function(r){var n=r.validationError;n&&(t[r.cid]=n,e++)}),e},e.prototype.initialize=function(){},Object.defineProperty(e.prototype,"length",{get:function(){return this.models.length},enumerable:!0,configurable:!0}),e.prototype.first=function(){return this.models[0]},e.prototype.last=function(){return this.models[this.models.length-1]},e.prototype.at=function(t){var e=t<0?t+this.models.length:t;return this.models[e]},e.prototype.clone=function(t){void 0===t&&(t={});var e=this._shared&c.ItemsBehavior.share?this.models:this.map(function(t){return t.clone()}),r=new this.constructor(e,{model:this.model,comparator:this.comparator},this._shared);return t.pinStore&&(r._defaultStore=this.getStore()),r},e.prototype.toJSON=function(){return this.models.map(function(t){return t.toJSON()})},e.prototype.set=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e={}),void 0!==e.add&&this._log("warn","Collection.set doesn't support 'add' option, behaving as if options.add === true.",e),e.reset)this.reset(t,e);else{var r=this._createTransaction(t,e);r&&r.commit()}return this},e.prototype.dispose=function(){if(!this._disposed){for(var e=!this._shared,r=0,n=this.models;r<n.length;r++){var i=n[r];h.free(this,i),e&&i.dispose()}t.prototype.dispose.call(this)}},e.prototype.reset=function(t,e){void 0===e&&(e={});var r=y(this),i=h.dispose(this);return t&&p.emptySetTransaction(this,n(this,t,e),e,!0),_(this,e),e.silent||v(this,"reset",this,O({previousModels:i},e)),r&&g(this),this.models},e.prototype.add=function(t,e){void 0===e&&(e={});var r=n(this,t,e),i=this.models.length?f.addTransaction(this,r,e):p.emptySetTransaction(this,r,e);if(i)return i.commit(),i.added},e.prototype.remove=function(t,e){return void 0===e&&(e={}),t?Array.isArray(t)?d.removeMany(this,t,e):d.removeOne(this,t,e):[]},e.prototype._createTransaction=function(t,e){void 0===e&&(e={});var r=n(this,t,e);return this.models.length?!1===e.remove?f.addTransaction(this,r,e,!0):p.setTransaction(this,r,e):p.emptySetTransaction(this,r,e)},e.prototype.pluck=function(t){return this.models.map(function(e){return e[t]})},e.prototype.sort=function(t){if(void 0===t&&(t={}),h.sortElements(this,t)){var e=y(this);_(this,t)&&v(this,"sort",this,t),e&&g(this)}return this},e.prototype.push=function(t,e){return this.add(t,b({at:this.length},e))},e.prototype.pop=function(t){var e=this.at(this.length-1);return this.remove(e,t),e},e.prototype.unshift=function(t,e){return this.add(t,b({at:0},e))},e.prototype.shift=function(t){var e=this.at(0);return this.remove(e,t),e},e.prototype.slice=function(){return j.apply(this.models,arguments)},e.prototype.indexOf=function(t){var e=this.get(t);return this.models.indexOf(e)},e.prototype.modelId=function(t){return t[this.model.prototype.idAttribute]},e.prototype.toggle=function(t,e){var r=Boolean(this.get(t)),n=void 0===e?!r:Boolean(e);return r!==n&&(r?this.remove(t):this.add(t)),n},e.prototype._log=function(t,e,r){u.tools.log[t]("[Collection Update] "+this.model.prototype.getClassName()+"."+this.getClassName()+": "+e,r,"Attributes spec:",this.model.prototype._attributes)},e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)||"Collection"},e}(c.Transactional);A._attribute=l.AggregatedType,A=P=a([u.define({cidPrefix:"c",model:l.Record,_changeEventName:"changes",_aggregationError:null})],A),e.Collection=A;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(l.SharedType);x.defaultValue=[],l.createSharedTypeSpec(A,l.SharedType),l.Record.Collection=A;var P},function(t,e,r){"use strict";function n(){}function i(t){var e;if("function"==typeof t)e=t.has;else if(t&&t instanceof c)e=t;else{var r=o(t);e=r&&r.prototype instanceof s.Transactional?r.shared.value(t):new c({type:r,value:t})}return e.options}function o(t){switch(typeof t){case"number":return Number;case"string":return String;case"boolean":return Boolean;case"undefined":return;case"object":return t?t.constructor:void 0}}Object.defineProperty(e,"__esModule",{value:!0});var s=r(1),a=r(0),u=a.tools.assign,c=function(){function t(t){this.options={getHooks:[],transforms:[],changeHandlers:[]},t&&u(this.options,t)}return t.prototype.check=function(t,e){function r(r,n,i){if(!t.call(r,n,i)){var o=e||t.error||i+" is not valid";return"function"==typeof o?o.call(r,i):o}}var n=this.options.validate;return this.metadata({validate:n?function(t,e,i){return n(t,e,i)||r(t,e,i)}:r})},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.metadata({isRequired:!0})},enumerable:!0,configurable:!0}),t.prototype.watcher=function(t){return this.metadata({_onChange:t})},t.prototype.parse=function(t){return this.metadata({parse:t})},t.prototype.toJSON=function(t){return this.metadata({toJSON:"function"==typeof t?t:t?function(t){return t&&t.toJSON()}:n})},t.prototype.get=function(t){return this.metadata({getHooks:this.options.getHooks.concat(t)})},t.prototype.set=function(t){function e(e,r,n,i){if(this.isChanged(e,n)){var o=t.call(i,e,this.name);return void 0===o?n:this.convert(o,r,n,i)}return n}return this.metadata({transforms:this.options.transforms.concat(e)})},t.prototype.changeEvents=function(t){return this.metadata({changeEvents:t})},t.prototype.events=function(t){function e(t,e,n){e&&e.trigger&&r.unsubscribe(n,e),t&&t.trigger&&r.subscribe(n,t)}var r=new a.EventMap(t);return this.metadata({changeHandlers:this.options.changeHandlers.concat(e)})},Object.defineProperty(t.prototype,"has",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.metadata=function(e){var r=new t(this.options);return u(r.options,e),r},t.prototype.value=function(t){return this.metadata({value:t})},t}();e.ChainableAttributeSpec=c,Function.prototype.value=function(t){return new c({type:this,value:t})},Object.defineProperty(Function.prototype,"isRequired",{get:function(){return this._isRequired||this.has.isRequired},set:function(t){this._isRequired=t}}),Object.defineProperty(Function.prototype,"has",{get:function(){return this._has||new c({type:this,value:this._attribute.defaultValue})},set:function(t){this._has=t}}),e.toAttributeDescriptor=i},function(t,e,r){"use strict";function n(t){switch(typeof t){case"function":return function(e){return t.call(e)};case"object":return function(){return t};case"string":return new i.CompiledReference(t).resolve}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(13);e.parseReference=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),s=r(5),a=r(3),u=r(14),c=o.$,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(u.RestModel);l=i([a.define({}),a.mixins(a.Store),a.mixinRules({get:"overwrite",getStore:"overwrite"})],l),e.RestStore=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._resolved={},e}return n(e,t),e.prototype.initialize=function(){var t=this;this.each(function(e,r){if(e){e.store=t;var n=e.fetch;if(n){var i=t;e.fetch=function(){return i._resolved[r]=n.apply(this,arguments)}}e instanceof u.RestCollection&&e.length&&(t._resolved[r]=!0)}})},e.prototype.fetch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],n=t.length?t:this.keys(),i=0,s=n;i<s.length;i++){var a=s[i],u=this.attributes[a];u&&u.fetch&&r.push(u.fetch())}return c&&c.when&&c.when.apply(o.$,r)},e.prototype.fetchOnce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],n=this,i=t.length?t:this.keys(),s=0,a=i;s<a.length;s++){var u=a[s],l=n.attributes[u];r.push(n._resolved[u]||l&&l.fetch&&l.fetch())}return c&&c.when&&c.when.apply(o.$,r)},e.prototype.clear=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length?t:this.keys(),n=0,i=r;n<i.length;n++){var o=i[n],s=this.attributes[o];s instanceof u.RestCollection?s.reset():s instanceof a.Store?s.clear():s instanceof u.RestModel&&s.set(s.defaults()),this._resolved[o]=!1}return this},e.define=function(t,e){var r=t.defaults||t.attributes;return s.each(r,function(t,e){t.has&&(r[e]=t.has.set(function(t){if(!t||!t.length){(this._resolved||(this._resolved={}))[e]=!1}return t}))}),u.RestModel.define.call(this,t,e)},e}(l);h=i([a.define({})],h),e.LazyStore=h},function(t,e,r){"use strict";function n(t,e,r){switch(t){case 1:return function(){return o[e](this[r])};case 2:return function(t){return o[e](this[r],t)};case 3:return function(t,n){var s=this[r],a=i(t,this);return arguments.length>1?o[e](s,a,n):o[e](s,a)};case 4:return function(t,n,s){var a=this[r],u=i(t,this);return arguments.length>1?o[e](a,u,n,s):o[e](a,u)};default:return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.unshift(this[r]),o[e].apply(o,t)}}}function i(t,e){switch(typeof t){case"function":return t;case"string":return function(e){return e.get(t)};case"object":if(!(t instanceof e.model))return o.matches(t)}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=r(5);e.ModelMixin={pick:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.pick(this,t)},escape:function(t){return o.escape(this[t])},matches:function(t){return!!o.iteratee(t,this)(this)},omit:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.mapObject(function(e,r){if(t.indexOf(r)<0)return e})},invert:function(){var t={};return this.each(function(e,r){return t[e]=r}),t},pairs:function(){return this.map(function(t,e){return[e,t]})},isEmpty:function(){return!this.values().length},chain:function(){return o.chain(this.mapObject(function(t){return t}))}},e.CollectionMixin={where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)}},function(t,e,r){o.each(r,function(r,i){o[i]&&(t[i]=n(r,i,e))})}(e.CollectionMixin,"models",{forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,findIndex:3,findLastIndex:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3})},function(t,e,r){"use strict";function n(t,e){return{get:function(){return t[e]},set:function(r){t[e]=r}}}var i=r(3),o=r(8),s=r(14),a=r(3),u=r(15),c=r(20),l=r(19),h=Object.create(i);h.Mixable.mixins(h.Events),h.Mixable.mixTo(o.View,o.Router,o.History),h.Record.mixins(c.ModelMixin),h.Record.Collection.mixins(c.CollectionMixin);var f=h.tools.assign;Object.defineProperties(h,{emulateHTTP:n(o,"emulateHTTP"),emulateJSON:n(o,"emulateJSON"),sync:n(u,"sync"),errorPromise:n(u,"errorPromise"),ajax:n(u,"ajax"),history:n(o,"history"),store:n(a.Store,"global"),$:{get:function(){return o.$},set:function(t){o.$=u.$=t}}}),f(h,o,{Backbone:o,Class:h.Messenger,Model:s.RestModel,Collection:s.RestCollection,LazyStore:l.LazyStore,Store:l.RestStore,defaults:function(t){return h.Model.defaults(t)},default:h}),t.exports=h},function(t,e,r){"use strict";function n(t,e,r,n){var o=c(t),a=[],f=s(t,e,a,r,n);if(f.length||a.length){var p=i(t,f,r);if(h(t,r))return new u.CollectionTransaction(t,o,f,[],a,p);t._aggregationError&&u.logAggregationError(t)}o&&l(t)}function i(t,e,r){var n=r.at;if(null!=n){var i=t.models.length-e.length;return n=Number(n),n<0&&(n+=i+1),n<0&&(n=0),n>i&&(n=i),o(t.models,n,e),!1}return u.sortElements(t,r)}function o(t,e,r){for(var n=t.length-1,i=n-r.length;i>=e;i--,n--)t[n]=t[i];for(i=0,n=e;i<r.length;i++,n++)t[n]=r[i]}function s(t,e,r,n,i){for(var o=t._byId,s=t.models,a=(i||n.merge)&&!t._shared,c=(n.parse,t.model.prototype.idAttribute),l=s.length,h=0,f=e;h<f.length;h++){var p=f[h],d=p?o[p[c]]||o[p.cid]:null;if(d){if(a&&p!==d){var v=p.attributes||p,y=d._createTransaction(v,n);y&&r.push(y),d.hasChanged(c)&&u.updateIndex(o,d)}}else d=u.convertAndAquire(t,p,n),s.push(d),u.addIndex(o,d)}return s.slice(l)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),u=r(6),c=a.transactionApi.begin,l=a.transactionApi.commit,h=a.transactionApi.markAsDirty;e.addTransaction=n},function(t,e,r){"use strict";function n(t,e,r){var n=t.get(e);if(n){var i=p(t),o=t.models;o.splice(o.indexOf(n),1),a.removeIndex(t._byId,n);var s=f(t,r);return s&&(h(n,"remove",n,t,r),h(t,"remove",n,t,r)),a.free(t,n),s&&l(t,"update",t,r),i&&d(t),n}}function i(t,e,r){var n=o(t,e);if(n.length){var i=p(t);if(s(t,n.length),f(t,r)){new a.CollectionTransaction(t,i,[],n,[],!1).commit()}else i&&d(t)}return n}function o(t,e){for(var r=Array(e.length),n=t._byId,i=0,o=0;i<e.length;i++){var s=t.get(e[i]);s&&(r[o++]=s,a.removeIndex(n,s),a.free(t,s))}return r.length=o,r}function s(t,e){for(var r=t.models,n=t.models=Array(r.length-e),i=t._byId,o=0,s=0;o<r.length;o++){var a=r[o];i[a.cid]&&(n[s++]=a)}n.length=s}Object.defineProperty(e,"__esModule",{value:!0});var a=r(6),u=r(0),c=r(1),l=u.eventsApi.trigger2,h=u.eventsApi.trigger3,f=c.transactionApi.markAsDirty,p=c.transactionApi.begin,d=c.transactionApi.commit;e.removeOne=n,e.removeMany=i},function(t,e,r){"use strict";function n(t,e,r,n){var i=l(t),o=a(t,e,r);if(o.length){var s=c.sortElements(t,r);if(f(t,n?p:r))return new c.CollectionTransaction(t,i,o.slice(),[],[],s);t._aggregationError&&c.logAggregationError(t)}i&&h(t)}function i(t,e,r){var n=l(t),i=[],a=t.models,u=s(t,e,i,r),p=t.models.length-u.length,d=p<a.length?p?o(t,a):c.freeAll(t,a):[],v=i.length||u.length,y=c.sortElements(t,r)&&v||u.length||r.sorted;if(v||d.length||y){if(f(t,r))return new c.CollectionTransaction(t,n,u,d,i,y);t._aggregationError&&c.logAggregationError(t)}n&&h(t)}function o(t,e){for(var r=t._byId,n=[],i=0,o=e;i<o.length;i++){var s=o[i];r[s.cid]||(n.push(s),c.free(t,s))}return n}function s(t,e,r,n){for(var i=Array(e.length),o={},s=(null==n.merge||n.merge)&&!t._shared,a=t._byId,u=t.models,l=t.model.prototype.idAttribute,h=[],f=!0,p=0,d=0;p<e.length;p++){var v=e[p],y=null;if(v){var g=v[l],_=v.cid;if(o[g]||o[_])continue;y=a[g]||a[_]}if(y){if(s&&v!==y){f&&u[d]!==y&&(f=!1);var m=v.attributes||v,b=y._createTransaction(m,n);b&&r.push(b)}}else y=c.convertAndAquire(t,v,n),h.push(y);i[d++]=y,c.addIndex(o,y)}return i.length=d,t.models=i,t._byId=o,f||(n.sorted=!0),h}function a(t,e,r){for(var n=e?e.length:0,i=Array(n),o={},s=t.model.prototype.idAttribute,a=0,u=0;a<n;a++){var l=e[a];if(!l||!o[l[s]]&&!o[l.cid]){var h=c.convertAndAquire(t,l,r);i[u++]=h,c.addIndex(o,h)}}return i.length=u,t._byId=o,t.models=i}Object.defineProperty(e,"__esModule",{value:!0});var u=r(1),c=r(6),l=u.transactionApi.begin,h=u.transactionApi.commit,f=u.transactionApi.markAsDirty,p={silent:!0};e.emptySetTransaction=n,e.setTransaction=i},function(t,e,r){"use strict";function n(){return"l"+_++}function i(t,e){(t._listeningTo||(t._listeningTo=Object.create(null)))[e.cid||(e.cid=n())]=e}var o=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=r(10),a=r(7),u=r(9);e.EventMap=u.EventMap;var c=r(9),l=(s.mixins,s.define,s.extendable),h=(c.EventHandler,c.strings),f=c.on,p=c.off,d=c.once,v=c.trigger5,y=c.trigger2,g=c.trigger3,_=0,m=b=function(){function t(){this._events=void 0,this._listeningTo=void 0,this.cid=n(),this.initialize.apply(this,arguments)}return t.prototype.initialize=function(){},t.define=function(t,e){var r=a.omit(t||{},"localEvents");if(t){var n=t.localEvents,i=t._localEvents;if(n||i){var o=new u.EventMap(this.prototype._localEvents);n&&o.addEventsMap(n),i&&o.merge(i),r._localEvents=o}}return s.Mixable.define.call(this,r,e)},t.prototype.on=function(t,e,r){if("string"==typeof t)h(f,this,t,e,r);else for(var n in t)h(f,this,n,t[n],r||e);return this},t.prototype.once=function(t,e,r){if("string"==typeof t)h(d,this,t,e,r);else for(var n in t)h(d,this,n,t[n],r||e);return this},t.prototype.off=function(t,e,r){if(t)if("string"==typeof t)h(p,this,t,e,r);else for(var n in t)h(p,this,n,t[n],r||e);else p(this,void 0,e,r);return this},t.prototype.trigger=function(t,e,r,n,i,o){return void 0!==i||void 0!==o?v(this,t,e,r,n,i,o):void 0!==n?g(this,t,e,r,n):y(this,t,e,r),this},t.prototype.listenTo=function(t,e,r){return t&&(i(this,t),t.on(e,r||"object"!=typeof e?r:this,this)),this},t.prototype.listenToOnce=function(t,e,r){return t&&(i(this,t),t.once(e,r||"object"!=typeof e?r:this,this)),this},t.prototype.stopListening=function(t,e,r){var n=this._listeningTo;if(n){var i=!(e||r),o=r||"object"!=typeof e?r:this;if(t){var s=n[t.cid];s&&(i&&delete n[t.cid],s.off(e,o,this))}else if(null==t){for(var a in n)n[a].off(e,o,this);i&&(this._listeningTo=void 0)}}return this},t.prototype.dispose=function(){this._disposed||(this.stopListening(),this.off(),this._disposed=!0)},t}();m=b=o([l],m),e.Messenger=m;Array.prototype.slice;e.Events=a.omit(m.prototype,"constructor","initialize");var b},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.convert=function(t){return null==t||t instanceof this.type?t:new this.type(t)},e.prototype.clone=function(t){return t&&t.clone?t.clone():this.convert(JSON.parse(JSON.stringify(t)))},e}(i.AnyType);Function.prototype._attribute=o;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.create=function(){return this.type()},e.prototype.toJSON=function(t){return t},e.prototype.convert=function(t){return null==t?t:this.type(t)},e.prototype.isChanged=function(t,e){return t!==e},e.prototype.clone=function(t){return t},e}(i.AnyType);e.PrimitiveType=s,Boolean._attribute=String._attribute=s;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.convert=function(t,e,r,n){var i=null==t?t:this.type(t);return i!==i&&this._log("warn","assigned with Invalid Number",t,n),i},e.prototype.validate=function(t,e,r){if(null!=e&&!isFinite(e))return r+" is not valid number"},e}(s);e.NumericType=a,Number._attribute=a;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toJSON=function(t){return t},e.prototype.convert=function(t,e,r,n){return null==t||Array.isArray(t)?t:(this._log("warn","assigned with non-array",t,n),[])},e.prototype.clone=function(t){return t&&t.slice()},e}(i.AnyType);e.ArrayType=u,Array._attribute=u},function(t,e,r){"use strict";function n(t){return!isNaN(new Date(t).getTime())}function i(t){var e,r,n=0;if(r=f.exec(t)){for(var i,o=0;i=h[o];++o)r[i]=+r[i]||0;r[2]=(+r[2]||1)-1,r[3]=+r[3]||1,"Z"!==r[8]&&void 0!==r[9]&&(n=60*r[10]+r[11],"+"===r[9]&&(n=0-n)),e=Date.UTC(r[1],r[2],r[3],r[4],r[5]+n,r[6],r[7])}else e=Date.parse(t);return e}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(4),a=(Date.prototype,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.convert=function(t,e,r,n){if(null==t||t instanceof Date)return t;var i=new Date(t),o=i.getTime();return o!==o&&this._log("warn","assigned with Invalid Date",t,n),i},e.prototype.validate=function(t,e,r){if(null!=e){var n=e.getTime();if(n!==n)return r+" is Invalid Date"}},e.prototype.toJSON=function(t){return t&&t.toISOString()},e.prototype.isChanged=function(t,e){return(t&&t.getTime())!==(e&&e.getTime())},e.prototype.clone=function(t){return t&&new Date(t.getTime())},e}(s.AnyType));e.DateType=a,Date._attribute=a;var u=/\/Date\(([0-9]+)\)\//,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.convert=function(t){if("string"==typeof t){var e=u.exec(t);if(e)return new Date(Number(e[1]))}return a.prototype.convert.apply(this,arguments)},e.prototype.toJSON=function(t){return t&&"/Date("+t.getTime()+")/"},e}(a);e.MSDateType=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toJSON=function(t){return t.getTime()},e}(a);e.TimestampType=l,n("2011-11-29T15:52:30.5")&&n("2011-11-29T15:52:30.52")&&n("2011-11-29T15:52:18.867")&&n("2011-11-29T15:52:18.867Z")&&n("2011-11-29T15:52:18.867-03:30")||(a.prototype.convert=function(t){return null==t||t instanceof Date?t:new Date(i(t))});var h=[1,4,5,6,7,10,11],f=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(12),o=r(4),s=r(1),a=s.transactionApi.free,u=s.transactionApi.aquire,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.clone=function(t){return t?t.clone():t},e.prototype.toJSON=function(t){return t&&t.toJSON()},e.prototype.canBeUpdated=function(t,e,r){if(t&&null!=e){if(!(e instanceof this.type))return e;if(r.merge)return e.__inner_state__}},e.prototype.convert=function(t,e,r,n){return null==t?t:t instanceof this.type?(!t._shared||t._shared&s.ItemsBehavior.persistent||this._log("error","aggregated attribute is assigned with shared collection type",t,n),e.merge?t.clone():t):this.type.create(t,e)},e.prototype.dispose=function(t,e){e&&(a(t,e),e.dispose())},e.prototype.validate=function(t,e){var r=e&&e.validationError;if(r)return r},e.prototype.create=function(){return this.type.create()},e.prototype.initialize=function(t){t.changeHandlers.unshift(this._handleChange)},e.prototype._handleChange=function(t,e,r){e&&a(r,e),t&&!u(r,t,this.name)&&this._log("error","aggregated attribute assigned with object which is aggregated somewhere else",t,r)},e}(o.AnyType);e.AggregatedType=c,i.Record._attribute=c},function(t,e,r){"use strict";function n(){}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),s=r(1),a=r(0),u=a.eventsApi.on,c=a.eventsApi.off,l=s.transactionApi.free,h=s.transactionApi.aquire,f=s.ItemsBehavior.listen|s.ItemsBehavior.share,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.clone=function(t,e){if(!t||t._owner!==e)return t;var r=t.clone();return h(e,r,this.name),r},e.prototype.toJSON=function(){},e.prototype.canBeUpdated=function(t,e,r){if(t&&null!=e&&!(e instanceof this.type))return e},e.prototype.convert=function(t,e,r,n){if(null==t||t instanceof this.type)return t;var i=new this.type(t,e,f);return h(n,i,this.name),i},e.prototype.validate=function(t,e,r){},e.prototype.create=function(){return null},e.prototype._handleChange=function(t,e,r){e&&(e._owner===r?l(r,e):c(e,e._changeEventName,this._onChange,r)),t&&t._owner!==r&&u(t,t._changeEventName,this._onChange,r)},e.prototype.dispose=function(t,e){e&&(e._owner===t?(l(t,e),e.dispose()):c(e,e._changeEventName,this._onChange,t))},e.prototype.initialize=function(t){var e=this;this._onChange=this.propagateChanges?function(t,r,n){this===n||this.forceAttributeChange(e.name,r)}:n,t.changeHandlers.unshift(this._handleChange)},e}(o.AnyType);e.SharedType=p},function(t,e,r){"use strict";function n(t,e){var r=m({},t,i),n=g({},r,e),s=c(n),a={Attributes:s,_attributes:new s(n),properties:m({},r,function(t){return t.createPropertyDescriptor()}),defaults:l(n),_toJSON:f(n),_localEvents:o(r),_keys:Object.keys(n)},p=h(r,n);return p&&(a._parse=p),b.level||(a.forEachAttr=u(n)),a}function i(t,e){return p.AnyType.create(v.toAttributeDescriptor(t),e)}function o(t){var e;for(var r in t){var n=t[r],i=n.options._onChange;i&&(e||(e=new O),e.addEvent("change:"+r,"string"==typeof i?a(i,r):s(i,r)))}return e}function s(t,e){return function(r,n){t.call(r,n,e)}}function a(t,e){var r=new y.CompiledReference(t,!0),n=r.local,i=r.resolve,o=r.tail;return n?function(t,r){t[o](r,e)}:function(t,r){i(t)[o](r,e)}}function u(t){var e=["var v, _a=this._attributes;"];for(var r in t)e.push("( v = a."+r+' ) === void 0 || f( v, "'+r+'", _a.'+r+" );");return new Function("a","f",e.join(""))}function c(t){var e=[];for(var r in t)e.push("this."+r+" = x."+r+";");var n=new Function("x",e.join(""));return n.prototype=Object.prototype,n}function l(t){function e(t,e){r.push("this."+t+" = ( v = a."+t+" ) === void 0 ? "+e+" : v;"),n.push("this."+t+" = "+e+";")}var r=["var v;"],n=[];for(var i in t){var o=t[i],s=o.value,a=o.type;void 0===s&&a?e(i,"i."+i+".create()"):_(s)?e(i,JSON.stringify(s)):void 0===s?e(i,"void 0"):e(i,"i."+i+".value")}var u=new Function("i",n.join("")),c=new Function("a","i",r.join(""));return u.prototype=c.prototype=Object.prototype,function(t){return t?new c(t,this._attributes):new u(this._attributes)}}function h(t,e){var r=["var a=this._attributes;"],n=!1;for(var i in t){var o=e[i];if(o&&o.parse&&(n=!0),t[i].parse){var s="r."+i+" === void 0 ||( r."+i+" = a."+i+".parse.call( this, r."+i+', "'+i+'") );';r.push(s)}}if(n)return r.push("return r;"),new Function("r",r.join(""))}function f(t){var e=["var json = {},v=this.attributes,a=this._attributes;"];for(var r in t){t[r].toJSON&&e.push("json."+r+" = a."+r+".toJSON.call( this, v."+r+", '"+r+"' );")}return e.push("return json;"),new Function(e.join(""))}Object.defineProperty(e,"__esModule",{value:!0});var p=r(11),d=r(0),v=r(17),y=r(13),g=d.tools.defaults,_=d.tools.isValidJSON,m=d.tools.transform,b=d.tools.log,O=d.eventsApi.EventMap;e.compile=n,e.createForEach=u,e.createCloneCtor=c},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),o=r(18),s=r(2),a=r(2),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toJSON=function(t){return t&&"object"==typeof t?t.id:t},e.prototype.clone=function(t){return t&&"object"==typeof t?t.id:t},e.prototype.isChanged=function(t,e){return(t&&(null==t.id?t:t.id))!==(e&&(null==e.id?e:e.id))},e.prototype.validate=function(t,e,r){},e}(i.AnyType);s.Record.from=function(t){var e=o.parseReference(t);return new a.ChainableAttributeSpec({value:null,_attribute:u}).get(function(t,r){if("object"==typeof t)return t;var n=e(this),i=null;return n&&n.length&&(i=n.get(t)||null,this.attributes[r]=i,i&&this._attributes[r].handleChange(i,null,this)),i})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(31),r(34);var n=r(33);e.Store=n.Store},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),o=r(1),s=null,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getStore=function(){return this},e.prototype.get=function(t){var e=this[t];return e||this===this._defaultStore?e:this._owner?this._owner.get(t):this._defaultStore.get(t)},Object.defineProperty(e,"global",{get:function(){return s},set:function(t){s&&s.dispose(),o.Transactional.prototype._defaultStore=s=t},enumerable:!0,configurable:!0}),e}(i.Record);e.Store=a,a.global=new a},function(t,e,r){"use strict";function n(t){var e={parse:!0};return t&&f(e,t),e}function i(t){var e=function(t){function e(e,r){var i=t.call(this,e,n(r),p)||this;return i.resolvedWith=null,i}return o(e,t),Object.defineProperty(e.prototype,"__inner_state__",{get:function(){return this.refs||this.models},enumerable:!0,configurable:!0}),e.prototype.add=function(e,r){return t.prototype.add.call(this,e,n(r))},e.prototype.reset=function(e,r){return t.prototype.reset.call(this,e,n(r))},e.prototype._createTransaction=function(e,r){return t.prototype._createTransaction.call(this,e,n(r))},e.prototype.toJSON=function(){return this.refs?this.refs.map(function(t){return t.id||t}):this.models.map(function(t){return t.id})},e.prototype._validateNested=function(){return 0},e.prototype.clone=function(t){var e=this.constructor,r=new e([],{model:this.model,comparator:this.comparator});return this.resolvedWith?(r.resolvedWith=this.resolvedWith,r.reset(this.models,{silent:!0})):r.refs=this.refs,r},e.prototype.parse=function(t){var e=this.resolvedWith,r=Array.isArray(t)?t:[t],n=[];if(e)for(var i=0,o=r;i<o.length;i++){var s=o[i],a=e.get(s);a&&n.push(a)}else r.length&&(this.refs=r);return n},e.prototype.resolve=function(t){return t&&t.length&&(this.resolvedWith=t,this.refs&&(this.reset(this.refs,{silent:!0}),this.refs=null)),this},e.prototype.getModelIds=function(){return this.toJSON()},e.prototype.toggle=function(e,r){return t.prototype.toggle.call(this,this.resolvedWith.get(e),r)},e.prototype.addAll=function(){return this.reset(this.resolvedWith.models)},e.prototype.toggleAll=function(){return this.length?this.reset():this.addAll()},e}(t);return e=s([u.define({})],e)}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});var a=r(16),u=r(0),c=r(18),l=r(2),h=r(1),f=u.tools.fastDefaults;a.Collection.subsetOf=function(t){var e=this._SubsetOf||(this._SubsetOf=i(this)),r=c.parseReference(t);return new l.ChainableAttributeSpec({type:e}).get(function(t){return!t||t.resolvedWith||t.resolve(r(this)),t})};var p=h.ItemsBehavior.share|h.ItemsBehavior.persistent},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.length=t._validateNested(this.nested={}),(this.error=t.validate(t))&&this.length++}return t.prototype.each=function(t){var e=this,r=e.error,n=e.nested;r&&t(r,null);for(var i in n)t(n[i],i)},t.prototype.eachError=function(e,r){this.each(function(n,i){n instanceof t?n.eachError(e,r.get(i)):e(n,i,r)})},t}();e.ValidationError=n},function(t,r){t.exports=e}])});
//# sourceMappingURL=index.js.map